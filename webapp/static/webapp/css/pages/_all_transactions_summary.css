/* webapp/static/webapp/css/pages/_all_transactions_summary.css */

.section-header {
    @apply text-center mb-8;
}

.section-header h1 {
    @apply text-3xl font-bold text-gray-800 mb-2;
}

.section-header p {
    @apply text-lg text-gray-700;
}

.transactions-table-container {
    @apply bg-white rounded-lg shadow-md p-5 overflow-hidden relative; /* overflow-hidden au lieu de overflow-y-auto ici */
    max-height: 70vh; /* Hauteur maximale pour le défilement vertical, si nécessaire */
}

/* La grille principale est maintenant définie sur les éléments header et body */
.transactions-grid-header,
.transactions-grid-body {
    display: grid;
    /* Augmente le gap entre les colonnes pour plus d'aération */
    gap: 1rem; /* Environ 16px d'espacement entre les colonnes */
    
    /* Nouvelle répartition des colonnes : */
    /* Date (80px) | Description (flexible, min 150px) | Montant (100px) | Catégorie (flexible, min 100px) | Compte (100px) | Type (70px) | Ventilé (70px) | Actions (flexible, min 160px) */
    grid-template-columns: 80px minmax(150px, 2fr) 100px minmax(100px, 1.5fr) 100px 70px 70px minmax(160px, 1.2fr); 
    @apply text-sm text-left;
    font-size: 0.9em;
}

.transactions-grid-header {
    @apply font-semibold text-gray-600 uppercase text-xs sticky top-0 bg-gray-100 z-10; /* Sticky header avec fond gris clair */
    border-bottom: 1px solid #e5e7eb; /* Bordure sous l'en-tête */
}

.grid-cell-header {
    @apply px-4 py-3 flex items-center; /* Par défaut, aligné à gauche */
    justify-content: flex-start;
}
/* Alignements spécifiques pour les cellules d'en-tête */
.transactions-grid-header .grid-cell-header:nth-child(3), /* Montant */
.transactions-grid-header .grid-cell-header:nth-child(7), /* Ventilé */
.transactions-grid-header .grid-cell-header:nth-child(8)  /* Actions */ { 
    @apply justify-center; /* Montant, Ventilé, Actions centrés */
}


.transactions-grid-body {
    @apply divide-y divide-gray-200 overflow-y-auto; /* Permet le défilement du corps seul */
    max-height: calc(70vh - 50px); /* Ajuste la hauteur max pour le scroll, en soustrayant la hauteur approximative de l'en-tête */
}

.grid-row {
    display: contents; /* Les enfants sont directement dans la grille parente */
}

.grid-row:hover .grid-cell {
    @apply bg-gray-50; /* Effet de survol sur toute la ligne */
}

.grid-cell {
    @apply px-4 py-3 text-gray-800 border-b border-gray-200 flex items-center; /* flex items-center pour aligner au centre verticalement */
    /* Empêcher le texte de déborder des cellules par défaut */
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

/* Alignements spécifiques pour les cellules de données */
.grid-row .grid-cell:nth-child(1), /* Date */
.grid-row .grid-cell:nth-child(2), /* Description */
.grid-row .grid-cell:nth-child(4), /* Catégorie */
.grid-row .grid-cell:nth-child(5), /* Compte */
.grid-row .grid-cell:nth-child(6)  /* Type */ { 
    @apply justify-start; 
}
.grid-row .grid-cell:nth-child(3) { /* Montant */
    @apply justify-end font-semibold; /* Montant en gras et aligné à droite */
}
.grid-row .grid-cell:nth-child(7), /* Ventilé */
.grid-row .grid-cell:nth-child(8)  /* Actions */ { 
    @apply justify-center; 
}

/* Styles spécifiques pour les montants */
.amount.income { 
    @apply text-green-600; 
}
.amount.expense { 
    @apply text-red-600; 
}

.allocated-status {
    @apply font-bold text-center;
}
.allocated-true {
    @apply text-green-600;
}
.allocated-false {
    @apply text-gray-500;
}

/* Conteneur des boutons d'action */
.action-buttons-wrapper {
    @apply flex flex-col sm:flex-row gap-1 w-full items-center justify-center; /* Responsive: colonne sur mobile, rangée sur sm+ */
}
/* Assurez-vous que les boutons prennent l'espace nécessaire dans la colonne d'actions */
.action-buttons-wrapper > * { /* Cible tous les enfants directs (les boutons) */
    flex-shrink: 0; /* Empêche les boutons de rétrécir si le contenu est trop grand */
}


/* Styles pour la description tronquée (pour l'affichage complet au survol) */
.truncated-description-wrapper {
    @apply relative w-full whitespace-nowrap overflow-hidden text-ellipsis block;
}

.truncated-description-wrapper:hover .truncated-description-content {
    @apply whitespace-normal overflow-visible text-clip absolute bg-white p-2 shadow-lg z-10 min-w-[150px] transform -translate-x-1/2 left-1/2 bottom-full pb-3 border border-gray-200 rounded-md;
    /* Assurez que le texte complet est lisible au survol */
    max-width: 300px; /* Limite la largeur de la bulle d'info */
}

/* Ajustements pour les petits écrans (responsive) */
@media (max-width: 767px) {
    .transactions-grid-header,
    .transactions-grid-body {
        /* Sur mobile, on simplifie la grille pour ne montrer que l'essentiel */
        /* Date, Description, Montant, Actions */
        grid-template-columns: 70px minmax(100px, 2fr) 80px minmax(100px, 1fr); 
        gap: 0.5rem; /* Réduit le gap sur mobile */
    }
    .grid-cell-header, .grid-cell {
        @apply px-2 py-2 text-xs;
    }
    /* Masquer les colonnes moins essentielles sur les petits écrans */
    .transactions-grid-header .grid-cell-header:nth-child(4), /* Catégorie */
    .transactions-grid-header .grid-cell-header:nth-child(5), /* Compte */
    .transactions-grid-header .grid-cell-header:nth-child(6), /* Type */
    .transactions-grid-header .grid-cell-header:nth-child(7), /* Ventilé */
    .grid-row .grid-cell:nth-child(4), /* Catégorie */
    .grid-row .grid-cell:nth-child(5), /* Compte */
    .grid-row .grid-cell:nth-child(6), /* Type */
    .grid-row .grid-cell:nth-child(7) { /* Ventilé */
        display: none;
    }
    /* Ajustement des boutons d'action sur mobile */
    .action-buttons-wrapper {
        @apply flex-col gap-1; /* Toujours en colonne sur mobile pour éviter le débordement */
    }
    .action-buttons-wrapper .btn-action-small {
        @apply text-[0.6rem] px-1 py-0.5;
        min-width: unset; /* Enlève la largeur minimale fixe sur mobile pour plus de flexibilité */
    }
}
