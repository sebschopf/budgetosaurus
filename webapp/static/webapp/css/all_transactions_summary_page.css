/* webapp/static/webapp/css/all_transactions_summary_page.css */

/* Styles spécifiques pour cette page (déplacés depuis le template HTML) */

.transactions-table-container {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    padding: 20px;
    max-height: 70vh; /* Hauteur maximale pour le défilement vertical */
    overflow-y: auto; /* Active le défilement vertical si le contenu dépasse */
    position: relative; /* Pour le sticky header */
}

/* Conteneur principal de la grille du tableau */
.transactions-grid {
    display: grid;
    /* Définir les colonnes exactement comme pour un tableau fixe */
    /* Les largeurs doivent s'additionner à 100% */
    grid-template-columns: 8% 28% 12% 15% 10% 7% 7% 13%; /* Total 100% */
    
    font-size: 0.9em;
    text-align: left;
    /* NOUVEAU: Assure que les éléments de la grille s'étirent en hauteur par défaut */
    align-items: stretch; 
}

/* En-tête de la grille (équivalent thead et th) */
.grid-header {
    display: contents; /* Permet aux enfants d'être directement positionnés dans la grille parente */
    font-weight: 600;
    color: #555;
    text-transform: uppercase;
    font-size: 0.85em;
    background-color: #f5f5f5;
    position: sticky; /* Sticky header */
    top: 0;
    z-index: 1; /* Assure qu'il reste au-dessus du contenu défilant */
}

.grid-header .grid-cell {
    padding: 12px 8px;
    text-align: center; /* Centrer les en-têtes par défaut */
    border-bottom: 1px solid #e0e0e0;
    /* NOUVEAU: Centrer le contenu horizontalement dans les cellules d'en-tête */
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Cellules d'en-tête spécifiques pour l'alignement (écrasent le centrage général si besoin) */
.grid-header .grid-cell:nth-child(2) { justify-content: left; } /* Description */
.grid-header .grid-cell:nth-child(3) { justify-content: right; } /* Montant */
/* Les autres sont déjà centrés par défaut */


/* Ligne de données (équivalent tr) */
.grid-row {
    display: contents; /* Permet aux enfants d'être directement positionnés dans la grille parente */
}
.grid-row:hover .grid-cell {
    background-color: #fcfcfc; /* Effet hover sur toutes les cellules de la ligne */
}

/* Cellule de données (équivalent td) */
.grid-cell {
    padding: 12px 8px;
    color: #333;
    border-bottom: 1px solid #e0e0e0; /* Bordure individuelle pour chaque cellule */
    
    /* Utiliser flexbox pour le contenu interne de la cellule */
    display: flex; 
    /* NOUVEAU: Aligner le contenu en haut par défaut dans les cellules de données */
    align-items: flex-start; 
    /* NOUVEAU: Aligner le contenu au début horizontalement par défaut */
    justify-content: flex-start; 
}

/* Alignements spécifiques pour les cellules de données (écrasent les valeurs par défaut si besoin) */
.grid-row .grid-cell:nth-child(1) { justify-content: left; } /* Date */
.grid-row .grid-cell:nth-child(2) { justify-content: left; } /* Description */
.grid-row .grid-cell:nth-child(3) { justify-content: right; } /* Montant */
.grid-row .grid-cell:nth-child(4) { justify-content: left; } /* Catégorie */
.grid-row .grid-cell:nth-child(5) { justify-content: left; } /* Compte */
.grid-row .grid-cell:nth-child(6) { justify-content: left; } /* Type */
.grid-row .grid-cell:nth-child(7) { justify-content: center; } /* Ventilé */
.grid-row .grid-cell:nth-child(8) { justify-content: center; } /* Actions */


/* Styles spécifiques pour les montants */
.amount.income {
    color: #27ae60; /* Vert pour positif */
    font-weight: bold;
}
.amount.expense {
    color: #e74c3c; /* Rouge pour négatif */
    font-weight: bold;
}
.allocated-status {
    font-weight: bold;
    text-align: center; 
}
.allocated-true {
    color: #28a745; /* Vert pour ventilé */
}
.allocated-false {
    color: #999; /* Gris pour non ventilé */
}

/* Styles pour les boutons d'action (Diviser, Ventiler, Débiter) */
.action-button {
    background-color: #60a5fa; /* blue-400 */
    color: white;
    padding: 5px 7px;
    border-radius: 5px;
    font-size: 0.7em;
    cursor: pointer;
    text-decoration: none;
    display: block; /* Chaque bouton prendra sa propre ligne dans flex/grid */
    width: 100%; /* S'étale sur toute la largeur de son conteneur */
    transition: background-color 0.2s ease;
    border: none;
    text-align: center; /* Centrer le texte dans le bouton */
}
.action-button:hover {
    background-color: #3b82f6;
}
.action-button.allocate-btn { background-color: #28a745; }
.action-button.allocate-btn:hover { background-color: #218838; }
.action-button.debit-btn { background-color: #e74c3c; }
.action-button.debit-btn:hover { background-color: #c0392b; }

/* Conteneur des boutons d'action (à l'intérieur de la .grid-cell) */
.action-buttons-wrapper {
    display: flex; /* Utiliser flexbox pour empiler les boutons */
    flex-direction: column; /* Empiler verticalement */
    gap: 5px; /* Espacement entre les boutons */
    width: 100%; /* Occupe toute la largeur de la grid-cell */
    align-items: center; /* Centrer les boutons horizontalement dans ce wrapper */
    /* NOUVEAU: Aligner le contenu en haut du wrapper pour qu'il ne soit pas étiré verticalement */
    justify-content: flex-start; 
}

/* Styles pour la description tronquée */
.truncated-description-wrapper { /* Nouveau wrapper pour position: relative */
    position: relative;
    width: 100%; /* Prend toute la largeur de la grid-cell */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block; /* Pour s'assurer qu'il respecte la largeur */
}
.truncated-description-content { /* Le contenu réel avec le title */
    display: block;
    white-space: nowrap; /* Empêche le texte de passer à la ligne */
    overflow: hidden;    /* Cache ce qui dépasse */
    text-overflow: ellipsis; /* Affiche "..." si le texte est tronqué */
}

.truncated-description-wrapper:hover .truncated-description-content {
    white-space: normal; /* Affiche tout le texte au survol */
    overflow: visible;   /* Rend le contenu visible */
    text-overflow: clip; /* Retire les points de suspension */
    position: absolute; /* Permet le z-index et le débordement */
    background-color: #fff; /* Fond blanc pour la lisibilité */
    padding: 5px; /* Ajouter un padding pour le texte survolé */
    box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Ombre pour mettre en évidence */
    z-index: 10; /* S'assure que le texte survolé est au-dessus */
    min-width: 150px; /* Largeur minimale pour le popup de description */
    transform: translateX(-50%); /* Essai de centrage du popup */
    left: 50%; /* Positionnement par rapport au parent */
    top: auto; /* Annuler toute position top */
    bottom: 100%; /* Positionner au-dessus de la cellule */
    padding-bottom: 10px; /* Espace entre le texte et le bas du popup */
    pointer-events: none; /* Permettre la sélection du texte sous le popup */
}
/* Ajustements pour les petits écrans */
@media (max-width: 767px) {
    .transactions-grid {
        /* Adapter les largeurs de colonnes pour les petits écrans */
        grid-template-columns: 10% 25% 15% 15% 10% 8% 8% 9%; /* Ajuster le total si nécessaire */
    }
    .grid-cell {
        padding: 8px 4px;
        font-size: 0.75em;
    }
    .action-button {
        padding: 3px 5px;
        font-size: 0.65em;
    }
    .action-buttons-wrapper {
        min-width: unset; /* Retirer la min-width si elle pose problème sur mobile */
    }
    /* Exemple de masquage de colonne sur mobile si trop encombrant */
    /* .grid-header .grid-cell:nth-child(5), /* Compte */
    /* .grid-row .grid-cell:nth-child(5) {
        display: none;
    } */
}
